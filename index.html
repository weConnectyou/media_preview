<!doctype html>
<html lang="en">
<head>
  <title>preview</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="user-scalable=yes, initial-scale=1, width=device-width" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<style>
		*{
			margin: 0;
			padding: 0;
			border: none;
		}
		html{
			width: 100%;
			height: 100%;
			overflow: hidden;
		}
		body{
			width: 100%;
			height: 100%;
			text-align: center;
			background: #222 url(./imagedoc-darknoise.png) 0 0 repeat;
			-webkit-background-size: 44px 44px;
			background-size: 44px 44px;
		}
		.preview{
			display: table;
			width: 100%;
			height: 100%;
			text-align: center;
		}
		.content{
			display: table-cell;
			vertical-align: middle;
			color: #999;
			text-shadow:0 1px #222;
		}
		.content img{
			max-width: 100%;
			max-height: 100%;
		}
	</style>
</head>
<body>
	<div class="preview">
		<div class="content" id="previewPic">
			<img src="./ajax-loader.gif" width="16" height="16" alt="loading...">
		</div>
	</div>
	<script>
	// <![CDATA[
		(function(){
			function initPreview(){
				var index,src,el,Img;
				index = document.location.search.indexOf('=')+1;
				src   = document.location.search.substring(index);
				el 	  = document.getElementById('previewPic');
				Img   = new Image();
				Img.src = src;
				Img.onload = function(){
					Img.setAttribute("width",Img.width/2);   // retina display;
					Img.setAttribute("height",Img.height/2);   // retina display;
					el.innerHTML = "";
					el.appendChild(Img);
				};
				Img.onerror = function(){
					el.innerHTML = "loading error T_T!!";
				};
			}
			window.onload = initPreview;
		})();
	// ]]>
	</script>
</body>
</html>
